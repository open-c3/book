# 简介

定时任务就是把[作业任务](/作业任务/README.md)配置成一个定时执行的任务。

定时任务中的作业只能使用没有变量的作业，否则定时任务会因缺少变量的值而启动失败。

如果已经配置了定时任务后，再把作业改成有变量的作业，那么作业启动会失败。

注：在配置定时任务时，作业下拉列表只显示没有使用变量的作业。

如果不清楚作业和作业变量的问题，请查看[作业任务](/作业任务/README.md)详细文档后在使用定时任务的功能。

# 创建定时任务

页面路径： 【业务管理】->【定时作业】

![新建定时任务](/定时任务/images/新建定时任务.png)

## 定时任务

定时任务的名称，和作业名称区分开，一个作业可以配置多个定时任务。

## 作业名称

该下拉框只能选择不需要变量就能启动的作业。

## 规则

和linux中的crontab规则一致。

```
*    *    *    *    *
-    -    -    -    -
|    |    |    |    |
|    |    |    |    +----- 星期中星期几 (0 - 7) (星期天 为0)
|    |    |    +---------- 月份 (1 - 12) 
|    |    +--------------- 一个月中的第几天 (1 - 31)
|    +-------------------- 小时 (0 - 23)
+------------------------- 分钟 (0 - 59)
```

例:
   
* 每一分钟执行一次 ： ```* * * * *```
* 在 12 月内, 每天的早上 6 点到 12 点，每隔 3 个小时 0 分钟执行一次： ```0 6-12/3 * 12 *```
* 周一到周五每天下午 5:00 ：```0 17 * * 1-5```
* 每月每天的午夜 0 点 20 分, 2 点 20 分, 4 点 20 分....执行： ```20 0-23/2 * * *```

## 互斥锁

定时任务在执行时可能存在上一个任务执行没结束的情况，如5分钟定时执行某任务A，但是异常情况下A任务5分钟没执行完。

这时候可以选择使用互斥锁功能，如果上一个任务没结束，下一个定时任务就不会启动。

锁名是一个字符串，如果需要多个锁任务之间进行互斥，可以使用相同的字符串。（勾选上互斥锁后才会看到这个输入框）

# 开始 和 暂停

开始【新创建的定时任务默认是不开启的状态，需要手动开启】
![开始](/定时任务/images/开始.png)

暂停
![暂停](/定时任务/images/暂停.png)

# 修改

![修改](/定时任务/images/修改.png)